# 📊 ДОПОЛНЕНИЕ: СИСТЕМА СТАТИСТИКИ ИГРЫ

## 🎯 Что было добавлено

### 1. Класс GameStatistics (`lib/game_statistics.dart`)
- **Сбор статистики во время игры:**
  - Количество попаданий и промахов для каждого игрока
  - Количество уничтоженных кораблей
  - Количество оставшихся кораблей
  - Общее количество ходов
  - Длительность игры
  - Победитель игры

- **Форматированный вывод статистики:**
  - Красивое отображение в консоли с рамками и эмодзи
  - Расчет точности игроков в процентах
  - Подробная информация о каждом игроке

- **Сохранение в файл:**
  - Автоматическое создание каталога `game_statistics`
  - Сохранение статистики в текстовый файл с временной меткой
  - Подробная информация о игре в файле

### 2. Интеграция в игровой процесс (`lib/game_logic.dart`)
- **Отслеживание ходов:**
  - Каждый ход игрока записывается в статистику
  - Обновление количества оставшихся "кораблей" (свободных клеток)
  - Подсчет попаданий и промахов

- **Отображение статистики:**
  - Показ статистики после окончания игры
  - Автоматическое сохранение в файл
  - Интеграция с существующим игровым процессом

### 3. Асинхронная обработка
- Все методы работы со статистикой сделаны асинхронными
- Корректная обработка сохранения файлов
- Интеграция с существующим кодом игры

## 📁 Структура файлов

```
Практическая работа 1.1/
├── lib/
│   ├── main.dart              # Основной файл игры
│   ├── game_logic.dart        # Логика игры (обновлен)
│   └── game_statistics.dart   # НОВЫЙ: Система статистики
├── game_statistics/           # НОВЫЙ: Каталог для статистики
│   └── game_stats_*.txt      # Файлы статистики
└── СТАТИСТИКА_ОПИСАНИЕ.md     # НОВЫЙ: Это описание
```

## 🎮 Как использовать

1. **Запуск игры:** `dart run lib/main.dart`
2. **Играйте как обычно** - статистика собирается автоматически
3. **После окончания игры** - статистика отображается и сохраняется в файл
4. **Проверьте каталог `game_statistics`** для просмотра сохраненных файлов

## 📊 Пример статистики

```
╔══════════════════════════════════════════════════════════════╗
║                    📊 СТАТИСТИКА ИГРЫ 📊                    ║
╠══════════════════════════════════════════════════════════════╣
║ 🎮 Режим игры: Игрок против игрока
║ 📏 Размер поля: 3x3
║ ⏱️  Длительность: 2:15
║ 🏆 Победитель: X
╠══════════════════════════════════════════════════════════════╣
║ 📈 ОБЩАЯ СТАТИСТИКА:
║    🎯 Всего ходов: 9
║    🎯 Всего попаданий: 9
║    🎯 Всего промахов: 0
╠══════════════════════════════════════════════════════════════╣
║ 👤 ИГРОК 1 (X):
║    ✅ Попадания: 5
║    ❌ Промахи: 0
║    🚢 Уничтожено кораблей: 0
║    🚢 Осталось кораблей: 4
║    📊 Точность: 100.0%
╠══════════════════════════════════════════════════════════════╣
║ 👤 ИГРОК 2 (O):
║    ✅ Попадания: 4
║    ❌ Промахи: 0
║    🚢 Уничтожено кораблей: 0
║    🚢 Осталось кораблей: 5
║    📊 Точность: 100.0%
╚══════════════════════════════════════════════════════════════╝
```

## ✅ Требования выполнены

1. ✅ **Сбор статистики во время игры** - реализован полный сбор всех необходимых данных
2. ✅ **Создание каталога для статистики** - автоматически создается каталог `game_statistics`
3. ✅ **Сохранение в файл** - каждая игра сохраняется в отдельный файл с временной меткой
4. ✅ **Интеграция с игрой** - статистика работает автоматически без изменения игрового процесса

## 🚀 Дополнительные возможности

- **Красивое форматирование** статистики с эмодзи и рамками
- **Расчет точности** игроков в процентах
- **Временные метки** для каждой игры
- **Автоматическое создание каталогов**
- **Подробная информация** о каждом игроке
- **Совместимость** с существующим кодом игры
